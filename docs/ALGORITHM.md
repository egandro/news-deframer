# News Deframer Algorithm for Web

## Synopsis/Abstract

This specification defines an algorithm for detecting **clickbait**, **framing**, **persuasive intent**, and **hyper-stimulus content** in digital journalism. By ingesting RSS feeds, the system utilizes server-side AI to compute content quality metrics. These metrics enable client-side applications to mitigate exposure to algorithmic emotional exploitation and attention-economy tactics, optimizing for user well-being and client-side energy efficiency.

The current implementation targets **Latin-script languages**. The architecture is modular, allowing for adaptation to other writing systems (e.g., logographic scripts like Chinese) through the integration of language-specific NLP models.

The data can be utilized by Ad Blockers or privacy-focused browsers (e.g., Brave) to block or warn users about pages with high framing scores.

## Input Specification

The system utilizes **[RSS 2.0](https://cyber.harvard.edu/rss/rss.html)** feeds as the primary data ingestion vector. RSS is an established XML-based standard that facilitates platform-agnostic content distribution.

The ingestion pipeline extracts the following components from each feed item:
*   **Primary Attributes**: `title` (headline), `link` (content URL), and `description` (synopsis).
*   **Auxiliary Metadata**: A selection of optional fields such as `pubDate` (temporal context), `guid` (for deduplication), and `language`.

### Feed Sources
While any valid RSS 2.0 feed is supported (e.g., `https://rss.cnn.com/rss/edition.rss`), the system can also process feeds generated by third-party aggregator services. These services, such as `https://rss.app`, can create RSS feeds for web pages that do not offer them natively.

## Analysis & Scoring

The system employs AI to detect **clickbait**, **framing**, **persuasive intent**, and **hyper-stimulus content**.

### Methodology

1.  **Scoring**: Each element is assigned a normalized score between `0.0` (neutral) and `1.0` (highly manipulative).
2.  **Prompt Strategy**: The model acts as an objective, neutral reporter. It analyzes the provided `title` and `description` to extract the following fields:
    *   **`title_corrected`**: A corrected headline in an objective form if high score is present.
    *   **`description_corrected`**: A corrected description in an objective form if high score is present.
    *   **Score Fields** (`clickbait`, `framing`, `persuasive_intent`, `hyper_stimulus`): Values indicating the level of intensity (0.0 to 1.0).
    *   **Reason Fields** (`reason_clickbait`, `reason_framing`, `reason_persuasive`, `reason_stimulus`): Concise justifications for each score (max 10 words).

### Caching & Execution

The server periodically polls RSS feeds. Results are cached per `<item>`. Changes in primary or auxiliary attributes (e.g., `guid`, `pubDate`) trigger re-analysis, ensuring efficiency similar to standard RSS readers.

### Output

The analysis appends the AI generated values to the feed per `<item>`.


## Proxy Service Specification

The service functions as a proxy and content "washer". It retrieves an upstream RSS feed, analyzes it, and returns the enriched feed.

**Base URL**: `https://deframer.example.com/`

### Parameters

*   **`url`** (Required): The absolute URL of the upstream RSS feed (must be URL-encoded).
*   **`lang`** (Optional): The IETF BCP 47 language tag (e.g., `en`, `de-DE`) for filtering a specific language.
*   **`max_score`** (Optional): The maximum allowable score (0.0 - 1.0) for negative attributes. Items exceeding this threshold may be filtered.
*   **`embedded`** (Optional): If set to `true`, the system modifies the feed content directly instead of appending metadata. No additional values are added, enabling the proxy feed to serve as a direct replacement.
    -   **Title**: Replaced with the `title_corrected` to mitigate emotional spikes.
    -   **Description**: Prepended with score summaries and reasoning.
    -   **Use Case**: Allows the proxy to function as a drop-in replacement for standard RSS readers without custom plugin support.

Example:

```bash
ORIGINAL_URL=https://rss.cnn.com/rss/edition.rss
URL_ENCODED=$(echo -n "${ORIGINAL_URL}" | jq -sRr @uri)
REPLACEMENT_URL="https://deframer.example.com/?url=${URL_ENCODED&embedded=true&max_score=0.5"
```

## Example Data

Input

```xml
<rss xmlns:dc="http://purl.org/dc/elements/1.1/"
        xmlns:content="http://purl.org/rss/1.0/modules/content/"
        xmlns:atom="http://www.w3.org/2005/Atom"
        mlns:media="http://search.yahoo.com/mrss/" version="2.0">
    <item>
        <title>
            <![CDATA[ This is the title ]]>
        </title>
        <description>
            <![CDATA[ This is the rescrption ]]>
        </description>
        <language>en-US</language>
        <link>https://www.example.com/the-link</link>
        <guid isPermaLink="true">https://www.example.com/the-link</guid>
        <pubDate>Wed, 05 Apr 2023 13:30:09 GMT</pubDate>
    </item>
</rss>
```

Output

```xml
<rss xmlns:dc="http://purl.org/dc/elements/1.1/"
        xmlns:content="http://purl.org/rss/1.0/modules/content/"
        xmlns:deframer="http://www.example.com/2026/deframer"
        xmlns:atom="http://www.w3.org/2005/Atom"
        mlns:media="http://search.yahoo.com/mrss/" version="2.0">
    <item>
        <title>
            <![CDATA[ This is the title ]]>
        </title>
        <description>
            <![CDATA[ This is the rescrption ]]>
        </description>
        <language>en-US</language>
        <link>https://www.example.com/the-link</link>
        <guid isPermaLink="true">https://www.example.com/the-link</guid>
        <pubDate>Wed, 05 Apr 2023 13:30:09 GMT</pubDate>
        <deframer:group>
            <deframer:meta updated="Wed, 10 Apr 2024 13:30:09 GMT"/>
            <deframer:content type="clickbait" score="0.3">Reason from AI in the specified or detected language</deframer:content>
            <deframer:content type="framing" score="0.2">Reason from AI in the specified or detected language</deframer:content>
            <deframer:content type="persuasive_intent" score="0.8">Reason from AI in the specified or detected language</deframer:content>
            <deframer:content type="hyper_stimulus" score="0.1">Reason from AI in the specified or detected language</deframer:content>
        </deframer:group>
    </item>
</rss>
```

## Use in Ad Blocker

The data collected and cached via the RSS ingestion pipeline can be leveraged by Ad Blockers or privacy-focused browsers (e.g., Brave) to extend protection beyond the feed reader.

### Assumptions

-   **URL Parity**: URLs in RSS feeds are identical to those on the live website. If feeds utilize link shorteners, the server must resolve them prior to caching.
-   **SEO Consistency**: This assumption is viable because consistent URL structures and naming conventions are standard practice in Search Engine Optimization (SEO).

### Implementation & Enhancement

Ad blockers already utilize lists to identify websites requiring client-side intervention. This architecture allows for the following enhancements:

1.  **Configuration**: The ad blocker configuration includes a flag indicating if a specific domain (e.g., `https://www.example.com`) is supported by the Deframer proxy.
2.  **Lookup Strategy**: When a user visits a flagged domain sub-page (e.g., `/foo`), the extension queries the local cache or the proxy service to check if that specific path corresponds to an analyzed feed item.

### Interaction Handling

The system manages user exposure through two primary intervention vectors:

#### 1. Link Interaction (Pre-Click)

If a user encounters a target link (e.g., `<a href=".../foo">Target</a>`) on a supported domain, the extension handles the event:

*   **Contextual Popup**: Displays a hovercard with the detected framing score and content warnings.
*   **DOM Modification**: Dynamically alters the link text or styling to visually indicate the level of framing before the user clicks.

#### 2. Direct Navigation (Cold Load)

If a user opens a URL directly (a "cold load"), the extension intercepts the rendering process:

*   **Stimulus Blocking**: The page content is initially obscured or hidden to prevent immediate psychological stimulus.
*   **Deframed Interstitial**: The user is presented with an overlay displaying the **framing rating** and the **AI-corrected title**.
*   **User Decision**: The interface offers clear options:
    *   **Proceed**: Reveal the original content (acknowledging the risk).
    *   **Allowlist**: Mark the domain as trusted for future visits.
    *   **Retreat**: Navigate back to the previous page.
